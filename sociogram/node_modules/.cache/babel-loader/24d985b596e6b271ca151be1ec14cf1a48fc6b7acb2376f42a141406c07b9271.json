{"ast":null,"code":"var query = require('./query');\n\n// recursively looks up the View tree to find the closest parent layout ( if it exists )\nfunction findLayoutView(view) {\n  if (typeof view === \"undefined\") {\n    return null;\n  }\n\n  // if the current level of the view contains a layout, return that\n  if (typeof view.layout !== \"undefined\" && typeof view.layout.presenter === \"function\") {\n    return view.layout;\n  }\n\n  // if we didn't find a layout on the current view level and there is no parent view,\n  // we have reached the root, return null ( no more layouts )\n  if (typeof view.parent === \"undefined\") {\n    return null;\n  }\n\n  // if we didn't find a layout on the current view level,\n  // and there is a parent view, and it has a layout...\n  // return that parent layout\n  if (typeof view.parent.layout !== \"undefined\") {\n    return view.parent.layout;\n  }\n\n  // there is a parent, but it doesn't contain a valid layout.\n  // try finding a new layout up one level of the View tree\n  return findLayoutView(view.parent);\n}\n;\n\n// hierarchically layouts are supported\n// first the layout will render at it's current level,\n// then it will traverse up yielding to every parent layout it finds until home\n// Note: To override parent layout lookup you can set layout.js exports.useParentLayout = false\nmodule['exports'] = function (view, data, cb) {\n  var $;\n  var self = this;\n  // will find nearest possible layout\n  var layoutView = findLayoutView(view);\n  if (layoutView !== null && typeof layoutView.present === \"function\") {\n    if (cb) {\n      return layoutView.present(data, function (err, content) {\n        $ = query(content);\n        $('.yield').append(view.template);\n        // at this point, we've rendered at least the first level of the view\n        // check to see if there are any parent layouts we need to apply\n        // Note: To override parent layout lookup you can set layout.js exports.useParentLayout = false\n        if (layoutView.key !== \"/\" && layoutView.presenter.useParentLayout !== false) {\n          var parentLayoutView = findLayoutView(layoutView.parent.parent);\n          if (parentLayoutView === null) {\n            return cb(null, $.html());\n          }\n          return parentLayoutView.present(data, function (err, content) {\n            var $$ = query(content);\n            $$('.yield').append($.html());\n            return cb(null, $$.html());\n          });\n        } else {\n          return cb(null, $.html());\n        }\n      });\n    } else {\n      $ = query(layoutView.present(data));\n      $('.yield').append(view.template);\n    }\n  } else {\n    if (layoutView !== null && layoutView.layout.template !== \"undefined\") {\n      $ = query(layoutView.template);\n      $('.yield').append(view.template);\n    } else {\n      $ = query(view.template);\n    }\n    if (cb) {\n      return cb(null, $.html());\n    } else {\n      return $.html();\n    }\n  }\n};","map":{"version":3,"names":["query","require","findLayoutView","view","layout","presenter","parent","module","data","cb","$","self","layoutView","present","err","content","append","template","key","useParentLayout","parentLayoutView","html","$$"],"sources":["/Users/ayanyadav/node_modules/view/lib/layout.js"],"sourcesContent":["var query = require('./query');\n\n// recursively looks up the View tree to find the closest parent layout ( if it exists )\nfunction findLayoutView (view) {\n\n  if (typeof view === \"undefined\") {\n    return null;\n  }\n\n  // if the current level of the view contains a layout, return that\n  if (typeof view.layout !== \"undefined\" && typeof view.layout.presenter === \"function\") {\n    return view.layout;\n  }\n\n  // if we didn't find a layout on the current view level and there is no parent view,\n  // we have reached the root, return null ( no more layouts )\n  if (typeof view.parent === \"undefined\") {\n    return null;\n  }\n\n  // if we didn't find a layout on the current view level,\n  // and there is a parent view, and it has a layout...\n  // return that parent layout\n  if (typeof view.parent.layout !== \"undefined\") {\n    return view.parent.layout;\n  }\n\n  // there is a parent, but it doesn't contain a valid layout.\n  // try finding a new layout up one level of the View tree\n  return findLayoutView(view.parent);\n\n};\n\n// hierarchically layouts are supported\n// first the layout will render at it's current level,\n// then it will traverse up yielding to every parent layout it finds until home\n// Note: To override parent layout lookup you can set layout.js exports.useParentLayout = false\nmodule['exports'] = function (view, data, cb) {\n  var $;\n  var self = this;\n  // will find nearest possible layout\n  var layoutView = findLayoutView(view);\n  if (layoutView !== null && typeof layoutView.present === \"function\") {\n    if (cb) {\n      return layoutView.present(data, function(err, content) {\n        $ = query(content);\n        $('.yield').append(view.template);\n        // at this point, we've rendered at least the first level of the view\n        // check to see if there are any parent layouts we need to apply\n        // Note: To override parent layout lookup you can set layout.js exports.useParentLayout = false\n        if (layoutView.key !== \"/\" && layoutView.presenter.useParentLayout !== false) {\n          var parentLayoutView = findLayoutView(layoutView.parent.parent);\n          if (parentLayoutView === null) {\n            return cb(null, $.html());\n          }\n          return parentLayoutView.present(data, function(err, content) {\n            var $$ = query(content);\n            $$('.yield').append($.html());\n            return cb(null, $$.html());\n          });\n        } else {\n          return cb(null, $.html());\n        }\n      });\n    } else {\n      $ = query(layoutView.present(data));\n      $('.yield').append(view.template);\n    }\n  } else {\n    if (layoutView !== null && layoutView.layout.template !== \"undefined\") {\n      $ = query(layoutView.template);\n      $('.yield').append(view.template);\n    } else {\n      $ = query(view.template);\n    }\n    if (cb) {\n      return cb(null, $.html());\n    } else {\n      return $.html();\n    }\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}