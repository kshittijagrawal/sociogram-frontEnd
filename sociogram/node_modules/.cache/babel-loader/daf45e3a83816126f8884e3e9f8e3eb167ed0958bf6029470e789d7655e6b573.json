{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { storage } from \"@/firebase\";\nimport axios from \"axios\";\nimport { ref, uploadBytes, getDownloadURL } from \"@firebase/storage\";\nimport \"firebase/storage\";\n// import PostInfo from \"../views/PostInfo.vue\";\nexport default {\n  data() {\n    return {\n      userId: \"63db40eff9d8e72fa3015fd7\",\n      datePosted: \"\",\n      fileType: \"images\",\n      filePostedURL: \"\",\n      caption: \"MAc Book Pro !!!\",\n      url: \"\",\n      fileName: \"\"\n    };\n  },\n  components: {\n    // PostInfo,\n  },\n  methods: {\n    HandleFileChange(event) {\n      const file = event.target.files[0];\n      this.fileName = file.name;\n    },\n    async upload() {\n      const storageRef = ref(storage, `Images/${this.fileName}`);\n      await uploadBytes(storageRef, this.$refs.inputs.files[0]).then(res => {\n        console.log(\"From upload\");\n        console.log(res);\n      });\n      await getDownloadURL(ref(storage, `Images/${this.fileName}`)).then(res => {\n        this.url = res;\n        console.log(\"from download\");\n        this.$router.push(\"/postinfo\");\n        console.log(this.url);\n        localStorage.setItem(\"imageURL\", this.url);\n      });\n      axios.post(\"/instaPosts/api/user/addPost\", {\n        headers: {\n          Authorization: this.token,\n          userId: localStorage.getItem(\"userId\")\n        }\n      }, {\n        userId: this.userId,\n        datePosted: new Date(),\n        fileType: this.fileType,\n        filePostedURL: this.url,\n        caption: this.caption\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";AASA;AACA;AACA;AACA;AACA;AACA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EAAA,CACA;EACAC;IACAC;MACA;MACA;IACA;IACA;MACA;MACA;QACAC;QACAA;MACA;MACA,mEACAC;QACA;QACAD;QACA;QACAA;QACAE;MACA,EACA;MACAC,WACA,gCACA;QACAC;UACAC;UACAf;QACA;MACA,GACA;QACAA;QACAC;QACAC;QACAC;QACAC;MACA,EACA;IACA;EACA;AACA","names":["data","userId","datePosted","fileType","filePostedURL","caption","url","fileName","components","methods","HandleFileChange","console","res","localStorage","axios","headers","Authorization"],"sourceRoot":"src/views","sources":["ImageUpload.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- <img :src=\"url\" class=\"post-image\" /> -->\n    <input type=\"file\" ref=\"inputs\" @change=\"HandleFileChange\" />\n    <button @click=\"upload\">Upload</button>\n  </div>\n</template>\n\n<script>\nimport { storage } from \"@/firebase\";\nimport axios from \"axios\";\nimport { ref, uploadBytes, getDownloadURL } from \"@firebase/storage\";\nimport \"firebase/storage\";\n// import PostInfo from \"../views/PostInfo.vue\";\nexport default {\n  data() {\n    return {\n      userId: \"63db40eff9d8e72fa3015fd7\",\n      datePosted: \"\",\n      fileType: \"images\",\n      filePostedURL: \"\",\n      caption: \"MAc Book Pro !!!\",\n      url: \"\",\n      fileName: \"\",\n    };\n  },\n  components: {\n    // PostInfo,\n  },\n  methods: {\n    HandleFileChange(event) {\n      const file = event.target.files[0];\n      this.fileName = file.name;\n    },\n    async upload() {\n      const storageRef = ref(storage, `Images/${this.fileName}`);\n      await uploadBytes(storageRef, this.$refs.inputs.files[0]).then((res) => {\n        console.log(\"From upload\");\n        console.log(res);\n      });\n      await getDownloadURL(ref(storage, `Images/${this.fileName}`)).then(\n        (res) => {\n          this.url = res;\n          console.log(\"from download\");\n          this.$router.push(\"/postinfo\");\n          console.log(this.url);\n          localStorage.setItem(\"imageURL\", this.url);\n        }\n      );\n      axios.post(\n        \"/instaPosts/api/user/addPost\",\n        {\n          headers: {\n            Authorization: this.token,\n            userId: localStorage.getItem(\"userId\"),\n          },\n        },\n        {\n          userId: this.userId,\n          datePosted: new Date(),\n          fileType: this.fileType,\n          filePostedURL: this.url,\n          caption: this.caption,\n        }\n      );\n    },\n  },\n};\n</script>\n<style scoped>\n.post-image {\n  width: 30vw;\n  height: 50vh;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}